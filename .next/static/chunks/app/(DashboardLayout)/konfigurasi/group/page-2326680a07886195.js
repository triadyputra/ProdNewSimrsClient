(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9687],{5953:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>Y});var r=l(95155),n=l(12115),o=l(45711),a=l(89762),i=l(98730),s=l(16632),d=l(54581),c=l(7068),u=l(78449),h=l(33989),x=l(17976),m=l(56033),A=l(90404),p=l(64263),g=l(99776),j=l(14426),f=l(68534),C=l(12537),I=l(36114),b=l(54492),v=l(99927),y=l(71977),k=l(30676),S=l(77696),w=l(12654),E=l(36956),z=l(26072),P=l(45406),N=l(34864),M=l(14976),R=l(76871),G=l(72110),D=l(4472),T=l(700),H=l(4915),L=l(33613),O=l(3127),K=l(89990),V=l(86475),W=l(31747);let B=e=>{let{data:t,selected:l,onChange:o}=e,[a,i]=(0,n.useState)([]),[s,c]=(0,n.useState)([]),u=e=>{i(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},h=e=>{c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},x=(e,t)=>{o(l.some(l=>l.IdController===e&&l.IdAction===t)?l.filter(l=>l.IdController!==e||l.IdAction!==t):[...l,{IdController:e,IdAction:t}])},m=e=>{let t=e.ActionViewModel.map(t=>({IdController:e.IdController,IdAction:t.IdAction})),r=t.every(e=>l.some(t=>t.IdController===e.IdController&&t.IdAction===e.IdAction)),n=[...l];r?n=n.filter(t=>t.IdController!==e.IdController):t.forEach(e=>{n.some(t=>t.IdController===e.IdController&&t.IdAction===e.IdAction)||n.push(e)}),o(n)},A=e=>{let t=[];e.ControllerViewModel.forEach(e=>{e.ActionViewModel.forEach(l=>{t.push({IdController:e.IdController,IdAction:l.IdAction})})});let r=t.every(e=>l.some(t=>t.IdController===e.IdController&&t.IdAction===e.IdAction)),n=[...l];r?n=n.filter(e=>!t.some(t=>t.IdController===e.IdController&&t.IdAction===e.IdAction)):t.forEach(e=>{n.some(t=>t.IdController===e.IdController&&t.IdAction===e.IdAction)||n.push(e)}),o(n)};return(0,r.jsxs)(d.default,{mt:2,children:[(0,r.jsx)(T.default,{fontWeight:"bold",mb:1,children:"Hak Akses"}),t.map(e=>{let t=[];e.ControllerViewModel.forEach(e=>e.ActionViewModel.forEach(l=>t.push({IdController:e.IdController,IdAction:l.IdAction})));let n=t.every(e=>l.some(t=>t.IdController===e.IdController&&t.IdAction===e.IdAction)),o=!n&&t.some(e=>l.some(t=>t.IdController===e.IdController&&t.IdAction===e.IdAction));return(0,r.jsxs)(d.default,{border:1,borderRadius:2,p:2,mb:2,children:[(0,r.jsxs)(d.default,{display:"flex",alignItems:"center",children:[(0,r.jsx)(H.A,{control:(0,r.jsx)(L.A,{checked:n,indeterminate:o,onChange:()=>A(e)}),label:(0,r.jsx)("strong",{children:e.NamaMenu})}),(0,r.jsx)(O.A,{size:"small",onClick:()=>u(e.IdMenu),children:a.includes(e.IdMenu)?(0,r.jsx)(V.A,{}):(0,r.jsx)(W.A,{})})]}),(0,r.jsx)(K.A,{in:a.includes(e.IdMenu),children:(0,r.jsx)(d.default,{ml:3,children:e.ControllerViewModel.map(e=>{let t=e.ActionViewModel.map(t=>({IdController:e.IdController,IdAction:t.IdAction})),n=t.every(e=>l.some(t=>t.IdController===e.IdController&&t.IdAction===e.IdAction)),o=!n&&t.some(e=>l.some(t=>t.IdController===e.IdController&&t.IdAction===e.IdAction));return(0,r.jsxs)(d.default,{mt:1,children:[(0,r.jsxs)(d.default,{display:"flex",alignItems:"center",children:[(0,r.jsx)(H.A,{control:(0,r.jsx)(L.A,{checked:n,indeterminate:o,onChange:()=>m(e)}),label:e.Controller}),(0,r.jsx)(O.A,{size:"small",onClick:()=>h(e.IdController),children:s.includes(e.IdController)?(0,r.jsx)(V.A,{}):(0,r.jsx)(W.A,{})})]}),(0,r.jsx)(K.A,{in:s.includes(e.IdController),children:(0,r.jsx)(d.default,{ml:4,children:e.ActionViewModel.map(t=>(0,r.jsx)(H.A,{control:(0,r.jsx)(L.A,{checked:l.some(l=>l.IdController===e.IdController&&l.IdAction===t.IdAction),onChange:()=>x(e.IdController,t.IdAction)}),label:t.NamaAction},t.IdAction))})})]},e.IdController)})})})]},e.IdMenu)})]})},_=e=>{var t;let{groupToEdit:l,onClose:o,onSubmit:a,accessRoles:i}=e,[s,c]=(0,n.useState)(!1),[h,x]=(0,n.useState)({Id:"",Name:"",Access:"",Keterangan:"",Photo:""}),[m,A]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(l){x(l);try{let e=l.Access&&l.Access.startsWith("[")?JSON.parse(l.Access):[];A(e)}catch(e){A([])}}else x({Id:"",Name:"",Access:"",Keterangan:"",Photo:""}),A([])},[l]);let p=async e=>{e.preventDefault();try{c(!0);let e={...h,Access:JSON.stringify(m)};await a(e),o()}finally{c(!1)}};return(0,r.jsxs)(I.A,{open:!!l,onClose:o,maxWidth:"md",fullWidth:!0,children:[(0,r.jsx)(b.A,{variant:"h5",children:h.Id?"Edit Group":"Tambah Group Baru"}),(0,r.jsxs)(v.A,{children:[(0,r.jsx)(R.A,{children:h.Id?"Silakan ubah data group, kemudian klik Simpan.":"Silakan isi untuk menambahkan group baru."}),(0,r.jsx)(d.default,{mt:3,children:(0,r.jsx)("form",{onSubmit:p,children:(0,r.jsxs)(G.default,{container:!0,spacing:3,children:[(0,r.jsxs)(G.default,{size:{xs:12,lg:12},children:[(0,r.jsx)(D.A,{children:"Nama Group"}),(0,r.jsx)(u.A,{id:"Name",size:"small",variant:"outlined",fullWidth:!0,value:h.Name||"",onChange:e=>x({...h,Name:e.target.value})})]}),(0,r.jsxs)(G.default,{size:{xs:12,lg:12},children:[(0,r.jsx)(D.A,{children:"Keterangan"}),(0,r.jsx)(u.A,{id:"Keterangan",size:"small",variant:"outlined",fullWidth:!0,value:h.Keterangan||"",onChange:e=>x({...h,Keterangan:e.target.value})})]}),(0,r.jsx)(G.default,{size:{xs:12,lg:12},children:(0,r.jsx)(B,{data:i,selected:m,onChange:e=>A(e)},null!=(t=null==l?void 0:l.Id)?t:"new")}),(0,r.jsx)(G.default,{size:{xs:12,lg:12},children:(0,r.jsxs)(d.default,{display:"flex",justifyContent:"flex-end",children:[(0,r.jsx)(f.default,{sx:{mr:1},variant:"contained",color:"error",onClick:o,disabled:s||!h.Name,children:"Batal"}),(0,r.jsx)(f.default,{variant:"contained",color:"primary",type:"submit",disabled:s||!h.Name,children:s?(0,r.jsx)(j.default,{size:20,color:"inherit"}):"Simpan"})]})})]})})})]})]})},J="/api/konfigurasi/group",U=()=>{var e,t;let{showSnackbar:l}=(0,M.d)(),[o,a]=(0,n.useState)(""),[i,s]=(0,n.useState)(1),[R,G]=(0,n.useState)(10),[D,T]=(0,n.useState)([]),[H,L]=(0,n.useState)(!1),[O,K]=(0,n.useState)(!1),[V,W]=(0,n.useState)(null),{data:B,isLoading:U,mutate:X}=(0,z.Ay)("".concat(J,"?filter=").concat(encodeURIComponent(o),"&page=").concat(i,"&pageSize=").concat(R),P.n),Y=null!=(e=null==B?void 0:B.Data)?e:[],q=null!=(t=null==B?void 0:B.TotalCount)?t:0,F=U&&!B,{data:Q,isLoading:Z}=(0,z.Ay)("/api/konfigurasi/group/access",P.n);(0,n.useEffect)(()=>{0!==Y.length&&L(D.length===Y.length)},[D,Y]);let $=e=>{T(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},ee=async()=>{try{for(let e of D){let t=await fetch("".concat(J,"/").concat(e),{method:"DELETE",credentials:"include"});if(!t.ok){let e=await t.json();throw Error((null==e?void 0:e.message)||"Gagal menghapus group")}}l("Group berhasil dihapus","success"),T([]),L(!1),K(!1),X()}catch(e){l(e.message||"Gagal menghapus group","error")}},et=async e=>{try{let t=!!e.Id,r=await fetch(t?"".concat(J,"/").concat(e.Id):J,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}),n=await r.json();if(!r.ok)throw Error((null==n?void 0:n.message)||"Gagal menyimpan group");l(t?"Group berhasil diperbarui":"Group berhasil ditambahkan","success"),W(null),X()}catch(e){l(e.message||"Gagal menyimpan group","error")}};return(0,r.jsxs)(d.default,{children:[(0,r.jsxs)(c.default,{direction:{xs:"column",sm:"row"},spacing:2,mb:3,justifyContent:"space-between",children:[(0,r.jsx)(u.A,{placeholder:"Search group",size:"small",value:o,onChange:e=>{a(e.target.value),s(1)},InputProps:{endAdornment:(0,r.jsx)(h.A,{position:"end",children:(0,r.jsx)(k.A,{size:16})})}}),(0,r.jsxs)(c.default,{direction:"row",spacing:1,children:[D.length>0&&(0,r.jsx)(N.A,{access:{subject:"Role",action:"DeleteRole"},color:"error",variant:"outlined",onClick:()=>K(!0),children:"Hapus Yang Dipilih"}),V&&(0,r.jsx)(_,{groupToEdit:V,accessRoles:null!=Q?Q:[],onClose:()=>W(null),onSubmit:et}),(0,r.jsx)(N.A,{access:{subject:"Role",action:"PostRole"},color:"primary",variant:"contained",onClick:()=>W({}),children:"Tambah Group"})]})]}),(0,r.jsx)(d.default,{sx:{overflowX:"auto"},children:(0,r.jsxs)(x.A,{size:"small",children:[(0,r.jsx)(m.A,{children:(0,r.jsxs)(A.A,{children:[(0,r.jsx)(p.A,{padding:"checkbox",children:(0,r.jsx)(E.A,{checked:H,onChange:()=>{let e=!H;L(e),T(e?Y.map(e=>e.Id):[])}})}),(0,r.jsx)(p.A,{children:"Nama Group"}),(0,r.jsx)(p.A,{children:"Keterangan"}),(0,r.jsx)(p.A,{align:"right",children:"Actions"})]})}),(0,r.jsx)(g.A,{children:F?(0,r.jsx)(A.A,{children:(0,r.jsx)(p.A,{colSpan:5,align:"center",children:(0,r.jsx)(j.default,{size:24})})}):0===Y.length?(0,r.jsx)(A.A,{children:(0,r.jsx)(p.A,{colSpan:5,align:"center",children:"No data found"})}):Y.map(e=>(0,r.jsxs)(A.A,{children:[(0,r.jsx)(p.A,{padding:"checkbox",children:(0,r.jsx)(E.A,{checked:D.includes(e.Id),onChange:()=>$(e.Id)})}),(0,r.jsx)(p.A,{children:e.Name}),(0,r.jsx)(p.A,{children:e.Keterangan}),(0,r.jsxs)(p.A,{align:"right",children:[(0,r.jsx)(f.default,{variant:"contained",color:"success",size:"small",onClick:()=>W(e),startIcon:(0,r.jsx)(S.A,{width:18}),children:"Edit"}),(0,r.jsx)(N.A,{access:{subject:"Role",action:"PutRole"},color:"success",type:"icon",onClick:()=>W(e),children:(0,r.jsx)(S.A,{width:18})}),(0,r.jsx)(N.A,{access:{subject:"Role",action:"DeleteRole"},color:"error",type:"icon",onClick:()=>{T([e.Id]),K(!0)},children:(0,r.jsx)(w.A,{width:18})})]})]},e.Id))})]})}),(0,r.jsx)(C.A,{component:"div",count:q,page:i-1,onPageChange:(e,t)=>s(t+1),rowsPerPage:R,onRowsPerPageChange:e=>{G(parseInt(e.target.value,10)),s(1)},rowsPerPageOptions:[5,10,25],size:"small"}),(0,r.jsxs)(I.A,{open:O,onClose:()=>K(!1),children:[(0,r.jsx)(b.A,{children:"Konfirmasi Hapus"}),(0,r.jsx)(v.A,{children:"Apakah Anda yakin ingin menghapus data yang dipilih?"}),(0,r.jsxs)(y.A,{children:[(0,r.jsx)(f.default,{onClick:()=>K(!1),children:"Batal"}),(0,r.jsx)(f.default,{color:"error",onClick:ee,children:"Hapus"})]})]})]})},X=[{to:"/",title:"Home"},{title:"Daftar Group Akun"}],Y=()=>(0,r.jsxs)(a.A,{title:"Daftar Group Akun",description:"ini adalah daftar group akun",children:[(0,r.jsx)(o.A,{title:"Daftar Group Akun",items:X}),(0,r.jsx)(i.A,{children:(0,r.jsx)(s.A,{children:(0,r.jsx)(U,{})})})]})},12207:(e,t,l)=>{"use strict";l.d(t,{A:()=>r});let r={activeDir:"ltr",activeMode:"light",activeTheme:"BLUE_THEME",activeLayout:"vertical",isLayout:"full",isSidebarHover:!1,isCollapse:"full-sidebar",isLanguage:"en",isCardShadow:!0,isMobileSidebar:!1,isHorizontal:!1,isBorderRadius:7,sidebarWidth:270,miniSidebarWidth:87,topbarHeight:70}},14976:(e,t,l)=>{"use strict";l.d(t,{SnackbarProvider:()=>s,d:()=>d});var r=l(95155),n=l(12115),o=l(35726),a=l(9665);let i=(0,n.createContext)(null),s=e=>{let{children:t}=e,[l,s]=(0,n.useState)(!1),[d,c]=(0,n.useState)(""),[u,h]=(0,n.useState)("success");return(0,r.jsxs)(i.Provider,{value:{showSnackbar:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";c(e),h(t),s(!0)}},children:[t,(0,r.jsx)(o.A,{open:l,autoHideDuration:5e3,onClose:()=>s(!1),anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,r.jsx)(a.A,{onClose:()=>s(!1),severity:u,variant:"filled",sx:{width:"100%"},children:d})})]})},d=()=>{let e=(0,n.useContext)(i);if(!e)throw Error("useSnackbar harus dipakai di dalam SnackbarProvider");return e}},19849:(e,t,l)=>{"use strict";l.d(t,{CustomizerContextProvider:()=>i,z:()=>a});var r=l(95155),n=l(12115),o=l(12207);let a=(0,n.createContext)(void 0),i=e=>{let{children:t}=e,[l,i]=(0,n.useState)(o.A.activeDir),[s,d]=(0,n.useState)(o.A.activeMode),[c,u]=(0,n.useState)(o.A.activeTheme),[h,x]=(0,n.useState)(o.A.activeLayout),[m,A]=(0,n.useState)(o.A.isCardShadow),[p,g]=(0,n.useState)(o.A.isLayout),[j,f]=(0,n.useState)(o.A.isBorderRadius),[C,I]=(0,n.useState)(o.A.isCollapse),[b,v]=(0,n.useState)(o.A.isLanguage),[y,k]=(0,n.useState)(!1),[S,w]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{document.documentElement.setAttribute("class",s),document.documentElement.setAttribute("dir",l),document.documentElement.setAttribute("data-color-theme",c),document.documentElement.setAttribute("data-layout",h),document.documentElement.setAttribute("data-boxed-layout",p),document.documentElement.setAttribute("data-sidebar-type",C)},[s,l,c,h,p,C]),(0,r.jsx)(a.Provider,{value:{activeDir:l,setActiveDir:i,activeMode:s,setActiveMode:d,activeTheme:c,setActiveTheme:u,activeLayout:h,setActiveLayout:x,isCardShadow:m,setIsCardShadow:A,isLayout:p,setIsLayout:g,isBorderRadius:j,setIsBorderRadius:f,isCollapse:C,setIsCollapse:I,isLanguage:b,setIsLanguage:v,isSidebarHover:y,setIsSidebarHover:k,isMobileSidebar:S,setIsMobileSidebar:w},children:t})}},34864:(e,t,l)=>{"use strict";l.d(t,{A:()=>s});var r=l(95155),n=l(12115),o=l(3127),a=l(68534),i=l(94057);let s=e=>{let{access:t,onClick:l,children:s,color:d="inherit",size:c="medium",variant:u="contained",type:h="button"}=e,{acces:x}=(0,i.A)(),m=(0,n.useMemo)(()=>!!x&&0!==x.length&&x.some(e=>e.subject===t.subject&&e.action===t.action),[x,t.subject,t.action]);return"icon"===h?(0,r.jsx)(o.A,{onClick:l,disabled:!m,color:d,size:c,children:s}):(0,r.jsx)(a.default,{onClick:l,disabled:!m,color:d,size:c,variant:u,children:s})}},36956:(e,t,l)=>{"use strict";l.d(t,{A:()=>c});var r=l(95155),n=l(12115),o=l(75955),a=l(33613);let i=(0,o.Ay)("span")(e=>{let{theme:t}=e;return{borderRadius:3,width:19,height:19,marginLeft:"4px",boxShadow:"dark"===t.palette.mode?"0 0 0 1px ".concat(t.palette.grey[200]):"inset 0 0 0 1px ".concat(t.palette.grey[300]),backgroundColor:"transparent",".Mui-focusVisible &":{outline:"dark"===t.palette.mode?"0px auto ".concat(t.palette.grey[200]):"0px auto  ".concat(t.palette.grey[300]),outlineOffset:2},"input:hover ~ &":{backgroundColor:(t.palette.mode,t.palette.primary)},"input:disabled ~ &":{boxShadow:"none",background:t.palette.grey[100]}}}),s=(0,o.Ay)(i)({boxShadow:"none",width:19,height:19,"&:before":{display:"block",width:19,height:19,backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M12 5c-.28 0-.53.11-.71.29L7 9.59l-2.29-2.3a1.003 1.003 0 00-1.42 1.42l3 3c.18.18.43.29.71.29s.53-.11.71-.29l5-5A1.003 1.003 0 0012 5z' fill='%23fff'/%3E%3C/svg%3E\")",content:'""'}}),d=n.forwardRef((e,t)=>(0,r.jsx)(a.A,{disableRipple:!0,color:e.color||"default",checkedIcon:(0,r.jsx)(s,{sx:{backgroundColor:e.color?"".concat(e.color,".main"):"primary.main"}}),icon:(0,r.jsx)(i,{}),inputProps:{"aria-label":"Checkbox demo"},ref:t,...e}));d.displayName="CustomCheckbox";let c=d},45406:(e,t,l)=>{"use strict";l.d(t,{n:()=>r});let r=async e=>{let t=await fetch(e,{credentials:"include"});if(401===t.status){window.location.href="/auth/auth1/login";return}if(403===t.status){window.location.href="/forbidden";return}let l=await t.json();if(!t.ok)throw Error((null==l?void 0:l.message)||"Terjadi kesalahan");return l}},45711:(e,t,l)=>{"use strict";l.d(t,{A:()=>h});var r=l(95155);l(12115);var n=l(72110),o=l(700),a=l(10431),i=l(54581),s=l(6874),d=l.n(s),c=l(76372),u=l(66766);let h=e=>{let{subtitle:t,items:l,title:s,children:h}=e;return(0,r.jsxs)(n.default,{container:!0,sx:{backgroundColor:"primary.light",borderRadius:e=>e.shape.borderRadius/4,p:"30px 25px 20px",marginBottom:"30px",position:"relative",overflow:"hidden"},children:[(0,r.jsxs)(n.default,{mb:1,size:{xs:12,sm:6,lg:8},children:[(0,r.jsx)(o.default,{variant:"h4",children:s}),(0,r.jsx)(o.default,{color:"textSecondary",variant:"h6",fontWeight:400,mt:.8,mb:0,children:t}),(0,r.jsx)(a.A,{separator:(0,r.jsx)(c.A,{size:"5",fill:"textSecondary",fillOpacity:"0.6",style:{margin:"0 5px"}}),sx:{alignItems:"center",mt:l?"10px":""},"aria-label":"breadcrumb",children:l?l.map(e=>(0,r.jsx)("div",{children:e.to?(0,r.jsx)(d(),{href:e.to,passHref:!0,children:(0,r.jsx)(o.default,{color:"textSecondary",children:e.title})}):(0,r.jsx)(o.default,{color:"textPrimary",children:e.title})},e.title)):""})]}),(0,r.jsx)(n.default,{display:"flex",alignItems:"flex-end",size:{xs:12,sm:6,lg:4},children:(0,r.jsx)(i.default,{sx:{position:"absolute",top:16,right:16,display:{xs:"none",md:"block"}},children:(0,r.jsx)(u.default,{src:"/images/logos/img_logo.png",alt:"breadcrumbImg",width:80,height:80,priority:!0,style:{opacity:.9}})})})]})}},89762:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});var r=l(95155);l(12115);let n=e=>{let{title:t,description:l,children:n}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("title",{children:t}),(0,r.jsx)("meta",{name:"description",content:l}),n]})}},93493:(e,t,l)=>{Promise.resolve().then(l.bind(l,5953))},94057:(e,t,l)=>{"use strict";l.d(t,{A:()=>i,AuthProvider:()=>a});var r=l(95155),n=l(12115);let o=(0,n.createContext)(null),a=e=>{let{children:t}=e,[l,a]=(0,n.useState)(null),[i,s]=(0,n.useState)([]),[d,c]=(0,n.useState)([]);return(0,r.jsx)(o.Provider,{value:{user:l,menu:i,acces:d,setUser:a,setMenu:s,setAcces:c},children:t})},i=()=>{let e=(0,n.useContext)(o);if(!e)throw Error("useAuth must be used inside AuthProvider");return e}},98730:(e,t,l)=>{"use strict";l.d(t,{A:()=>s});var r=l(95155),n=l(41218),o=l(12115),a=l(16324),i=l(19849);let s=e=>{let{children:t,className:l,sx:s}=e,{isCardShadow:d}=(0,o.useContext)(i.z),c=(0,a.A)().palette.grey[200];return(0,r.jsx)(n.A,{sx:{p:0,border:d?"none":"1px solid ".concat(c),position:"relative",sx:s},className:l,elevation:9*!!d,variant:d?void 0:"outlined",children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[3307,2452,1923,5992,958,4911,8449,9665,9257,5726,7294,1604,6524,9836,8722,8441,1684,7358],()=>t(93493)),_N_E=e.O()}]);